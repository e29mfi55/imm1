<!-- Chosen Palette: Energetic & Playful (Blue, Purple, Orange, Emerald) -->
<!-- Application Structure Plan: The infographic is structured to guide the user from a high-level overview to detailed analysis.
1. **Hero Section (Introduction):** Sets the context with a strong hook about the "Samui Expat Network" and the key players.
2. **Network Overview (The Big Picture):** Visualizes the relationships between the three main subjects using a custom HTML/CSS diagram. This establishes the "who connects to whom" logic.
3. **In-Depth Profiles (The Characters):** Dedicated sections for each individual (Arsenii, Federico, Aidin) showcasing their financial behaviors through charts (Inflow/Outflow). This breaks down the "how" and "how much".
4. **Key Findings (The Summary):** A concluding section summarizing the hypothesis and key takeaways.
This structure mimics a forensic investigation: Identify suspects -> Map connections -> Analyze individual activities -> Draw conclusions. -->
<!-- Visualization & Content Choices:
1. **Network Diagram (HTML/CSS):**
   - Goal: Relationships.
   - Method: Styled HTML nodes with CSS connectors (borders/pseudo-elements).
   - Interaction: Hover effects to emphasize specific links.
   - Justification: Best for showing static but complex relationships without SVG/Mermaid.
2. **Horizontal Bar Charts (Chart.js):**
   - Goal: Compare.
   - Method: Chart.js Bar chart (indexAxis: 'y').
   - Interaction: Tooltips with formatted currency.
   - Modification: Added inline plugin to draw data labels directly on bars.
   - Justification: Excellent for comparing transaction volumes across different counterparties. Long labels are handled with wrapping.
3. **Donut Charts (Chart.js):**
   - Goal: Composition.
   - Method: Chart.js Doughnut chart.
   - Interaction: Segment isolation on hover.
   - Justification: Used to show the dominance of specific funding sources (e.g., Aidin's single source).
4. **Cards & Icons (HTML/Tailwind):**
   - Goal: Inform.
   - Method: Tailwind-styled cards with Unicode icons.
   - Justification: Clean, modern way to present key stats and profile summaries.
5. **Gemini AI Integration:**
   - Goal: Provide deep insights and summaries.
   - Method: API calls to Gemini 2.5 Flash.
   - UI: Buttons with sparkle icons to trigger analysis.
-->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô: Samui Expat Network</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Load Datalabels plugin for direct value display -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Markdown Parser for Gemini responses -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f8fafc; color: #1e293b; }
        
        /* Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 300px; /* Base height */
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        @media (min-width: 768px) {
            .chart-container { height: 350px; }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        ::-webkit-scrollbar-thumb {
            background: #94a3b8; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b; 
        }

        /* Node Pulse Animation */
        @keyframes pulse-ring {
            0% { transform: scale(0.33); opacity: 0.8; }
            80%, 100% { opacity: 0; }
        }
        .pulse-ring::before {
            content: '';
            position: absolute;
            left: 0; top: 0;
            height: 100%; width: 100%;
            border-radius: 50%;
            background-color: inherit;
            animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
            z-index: -1;
        }
        
        /* Connector Lines (Pure CSS) */
        .connector-line {
            position: absolute;
            background-color: #cbd5e1;
            z-index: 0;
        }
        .connector-arrow {
            position: absolute;
            width: 0; 
            height: 0; 
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 10px solid #cbd5e1;
            z-index: 0;
        }

        /* AI Loading Animation */
        .ai-loading {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .ai-content p { margin-bottom: 0.5em; }
        .ai-content ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 0.5em; }
        .ai-content strong { color: #1e293b; font-weight: 600; }
    </style>
</head>
<body class="bg-slate-50">

    <!-- Navigation / Header -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex-shrink-0 flex items-center gap-2">
                    <span class="text-3xl">üïµÔ∏è‚Äç‚ôÇÔ∏è</span>
                    <span class="font-bold text-xl text-slate-800 tracking-tight">Financial Intelligence</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#overview" class="text-slate-500 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢</a>
                    <a href="#arsenii" class="text-slate-500 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">Mr. Arsenii</a>
                    <a href="#federico" class="text-slate-500 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">Mr. Federico</a>
                    <a href="#aidin" class="text-slate-500 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">Mr. Aidin</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="bg-gradient-to-r from-slate-900 to-slate-800 text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-4 tracking-tight">
                ‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≤‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡πÉ‡∏ô‡πÄ‡∏Å‡∏≤‡∏∞‡∏™‡∏°‡∏∏‡∏¢ <br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">"Samui Expat Network"</span>
            </h1>
            <p class="text-lg md:text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed">
                ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏≤‡∏∞‡∏•‡∏∂‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á 3 ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô Crypto, ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏¥‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå
            </p>
            <div class="mt-8 flex justify-center gap-4">
                <div class="flex flex-col items-center">
                    <span class="text-3xl mb-1">üí∞</span>
                    <span class="text-xs font-semibold text-blue-300 uppercase">Investor</span>
                </div>
                <div class="w-12 border-t border-slate-600 self-center"></div>
                <div class="flex flex-col items-center">
                    <span class="text-3xl mb-1">üèóÔ∏è</span>
                    <span class="text-xs font-semibold text-purple-300 uppercase">Developer</span>
                </div>
                <div class="w-12 border-t border-slate-600 self-center"></div>
                <div class="flex flex-col items-center">
                    <span class="text-3xl mb-1">üöö</span>
                    <span class="text-xs font-semibold text-emerald-300 uppercase">Logistician</span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16">

        <!-- 1. Network Overview Section -->
        <section id="overview" class="scroll-mt-24">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-slate-800">‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå (Network Structure)</h2>
                <p class="text-slate-600 mt-2 max-w-2xl mx-auto">
                    ‡πÅ‡∏ú‡∏ô‡∏ú‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≤‡∏°
                </p>
            </div>

            <div class="bg-white rounded-2xl shadow-xl p-8 border border-slate-100 relative overflow-hidden">
                <!-- Decorative Background Grid -->
                <div class="absolute inset-0 opacity-5" style="background-image: radial-gradient(#64748b 1px, transparent 1px); background-size: 20px 20px;"></div>

                <div class="relative h-[500px] w-full max-w-4xl mx-auto">
                    
                    <!-- Nodes -->
                    <!-- Federico (Top Center) -->
                    <div class="absolute top-10 left-1/2 transform -translate-x-1/2 z-20 flex flex-col items-center w-64">
                        <div class="w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center border-4 border-white shadow-lg pulse-ring relative z-10">
                            <span class="text-4xl">üèóÔ∏è</span>
                        </div>
                        <div class="bg-white p-3 rounded-xl shadow-md mt-[-20px] pt-8 text-center border border-purple-100 w-full relative z-0">
                            <h3 class="font-bold text-purple-900">MR. FEDERICO</h3>
                            <p class="text-xs text-slate-500 uppercase font-semibold">The Developer</p>
                            <div class="mt-2 text-xs text-slate-600 bg-purple-50 p-1 rounded">
                                ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô & ‡∏à‡πà‡∏≤‡∏¢ Payroll
                            </div>
                        </div>
                    </div>

                    <!-- Arsenii (Bottom Right) -->
                    <div class="absolute bottom-10 right-0 md:right-20 z-20 flex flex-col items-center w-64">
                        <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center border-4 border-white shadow-lg relative z-10">
                            <span class="text-4xl">üí∞</span>
                        </div>
                        <div class="bg-white p-3 rounded-xl shadow-md mt-[-20px] pt-8 text-center border border-blue-100 w-full relative z-0">
                            <h3 class="font-bold text-blue-900">MR. ARSENII</h3>
                            <p class="text-xs text-slate-500 uppercase font-semibold">The Crypto Investor</p>
                             <div class="mt-2 text-xs text-slate-600 bg-blue-50 p-1 rounded">
                                ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (Crypto)
                            </div>
                        </div>
                    </div>

                    <!-- Aidin (Bottom Left) -->
                    <div class="absolute bottom-10 left-0 md:left-20 z-20 flex flex-col items-center w-64">
                        <div class="w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center border-4 border-white shadow-lg relative z-10">
                            <span class="text-4xl">üöö</span>
                        </div>
                        <div class="bg-white p-3 rounded-xl shadow-md mt-[-20px] pt-8 text-center border border-emerald-100 w-full relative z-0">
                            <h3 class="font-bold text-emerald-900">MR. AIDIN</h3>
                            <p class="text-xs text-slate-500 uppercase font-semibold">The Logistician</p>
                             <div class="mt-2 text-xs text-slate-600 bg-emerald-50 p-1 rounded">
                                ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á & ‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠
                            </div>
                        </div>
                    </div>

                    <!-- Connections -->
                    
                    <!-- Aidin -> Federico (Direct) -->
                    <div class="absolute top-[40%] left-[25%] z-10 hidden md:block">
                        <div class="bg-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg transform -rotate-12">
                             üí∏ ‡πÇ‡∏≠‡∏ô‡∏ï‡∏£‡∏á 22 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                        </div>
                    </div>
                    <!-- Diagonal Line Aidin to Federico -->
                    <div class="absolute left-[20%] bottom-[30%] w-0.5 h-[40%] bg-emerald-300 transform rotate-[35deg] origin-bottom hidden md:block"></div>

                    <!-- Shared Footprint (Indirect) -->
                    <div class="absolute top-[60%] left-1/2 transform -translate-x-1/2 z-0">
                         <div class="border-2 border-dashed border-slate-300 rounded-full w-96 h-40 flex items-center justify-center bg-slate-50/50 backdrop-blur-sm">
                            <div class="text-center">
                                <span class="text-2xl block mb-1">üìç</span>
                                <h4 class="font-bold text-slate-600 text-sm uppercase">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏° (Samui)</h4>
                                <p class="text-xs text-slate-500 mt-1 max-w-[200px]">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤, ‡∏Ç‡∏ô‡∏™‡πà‡∏á, ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô</p>
                            </div>
                         </div>
                    </div>

                </div>
                
                <!-- AI Insight Button for Network -->
                <div class="mt-6 text-center">
                    <button onclick="generateAIInsight('network', 'Analyze the relationship structure between Arsenii, Federico, and Aidin based on the visualization. What does the direct link between Aidin and Federico vs the indirect link with Arsenii suggest about their roles? Answer in Thai.')" class="bg-gradient-to-r from-violet-600 to-indigo-600 text-white px-6 py-2 rounded-full font-bold shadow-lg hover:shadow-xl transition-all flex items-center gap-2 mx-auto">
                        <span>‚ú® ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ AI</span>
                    </button>
                    <div id="ai-insight-network" class="hidden mt-4 p-4 bg-violet-50 border border-violet-100 rounded-xl text-left ai-content text-slate-700 text-sm"></div>
                </div>
            </div>
        </section>

        <!-- 2. MR. ARSENII Profile -->
        <section id="arsenii" class="scroll-mt-24 grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-4 space-y-6">
                <div class="bg-blue-600 text-white p-6 rounded-2xl shadow-lg relative overflow-hidden">
                    <div class="absolute top-0 right-0 -mr-4 -mt-4 w-24 h-24 bg-blue-500 rounded-full opacity-50 blur-xl"></div>
                    <div class="relative z-10">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="text-4xl bg-white/20 p-2 rounded-lg">üí∞</span>
                            <h2 class="text-2xl font-bold">MR. ARSENII</h2>
                        </div>
                        <p class="text-blue-100 leading-relaxed mb-4">
                            ‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÉ‡∏ô‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤
                        </p>
                        <ul class="text-sm space-y-2 text-blue-50">
                            <li class="flex items-center gap-2">üîπ <strong>Role:</strong> High Value Investor</li>
                            <li class="flex items-center gap-2">üîπ <strong>Key Asset:</strong> Crypto (Bitazza)</li>
                            <li class="flex items-center gap-2">üîπ <strong>Location:</strong> ‡πÄ‡∏Å‡∏≤‡∏∞‡∏™‡∏°‡∏∏‡∏¢</li>
                        </ul>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="text-blue-500">üì•</span> ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô (Inflow)
                    </h3>
                    <p class="text-sm text-slate-600 mb-4">
                        ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ
                    </p>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="arseniiInflowChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-8 bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800 flex items-center gap-2">
                            <span class="text-red-500">üì§</span> ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Outflow Analysis)
                        </h3>
                        <p class="text-sm text-slate-500 mt-1">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏≤‡∏ó)</p>
                    </div>
                    <span class="bg-blue-100 text-blue-800 text-xs font-bold px-3 py-1 rounded-full mt-2 md:mt-0">Lifestyle & Investment</span>
                </div>
                
                <div class="chart-container">
                    <canvas id="arseniiOutflowChart"></canvas>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                    <div class="bg-slate-50 p-3 rounded-lg border border-slate-100">
                        <div class="text-xs text-slate-500 uppercase font-bold">E-Wallet Top-up</div>
                        <div class="font-bold text-slate-700">T2P Co., Ltd.</div>
                        <div class="text-sm text-blue-600">573 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                    </div>
                    <div class="bg-slate-50 p-3 rounded-lg border border-slate-100">
                        <div class="text-xs text-slate-500 uppercase font-bold">Entertainment</div>
                        <div class="font-bold text-slate-700">OMART Liquor</div>
                        <div class="text-sm text-blue-600">323 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                    </div>
                    <div class="bg-slate-50 p-3 rounded-lg border border-slate-100">
                        <div class="text-xs text-slate-500 uppercase font-bold">Lifestyle</div>
                        <div class="font-bold text-slate-700">Koh Weed 420</div>
                        <div class="text-sm text-blue-600">172 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                    </div>
                </div>

                <!-- AI Insight Button for Arsenii -->
                <div class="mt-6 border-t border-slate-100 pt-4">
                    <button onclick="generateAIInsight('arsenii', 'Analyze Arsenii\'s spending behavior. He spends heavily on T2P (E-wallet), OMART Liquor (323 times), and Koh Weed (172 times). What lifestyle profile does this suggest? Is there a money laundering risk? Answer in Thai.')" class="text-blue-600 hover:text-blue-800 text-sm font-bold flex items-center gap-1">
                        <span>‚ú® ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡∏î‡πâ‡∏ß‡∏¢ AI</span>
                    </button>
                    <div id="ai-insight-arsenii" class="hidden mt-3 p-3 bg-blue-50 border border-blue-100 rounded-lg text-sm text-slate-700 ai-content"></div>
                </div>
            </div>
        </section>

        <!-- 3. MR. FEDERICO Profile -->
        <section id="federico" class="scroll-mt-24 grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-8 bg-white p-6 rounded-2xl shadow-sm border border-slate-100 order-2 lg:order-1">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800 flex items-center gap-2">
                            <span class="text-purple-500">üì§</span> ‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à (Business Outflow)
                        </h3>
                        <p class="text-sm text-slate-500 mt-1">‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à (‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏≤‡∏ó)</p>
                    </div>
                    <span class="bg-purple-100 text-purple-800 text-xs font-bold px-3 py-1 rounded-full mt-2 md:mt-0">Payroll & Operations</span>
                </div>
                
                <div class="chart-container">
                    <canvas id="federicoOutflowChart"></canvas>
                </div>

                <div class="mt-6 bg-purple-50 p-4 rounded-lg border border-purple-100 flex items-start gap-4">
                    <span class="text-2xl">üí°</span>
                    <div>
                        <h4 class="font-bold text-purple-900 text-sm">‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Key Observation)</h4>
                        <p class="text-sm text-purple-800 mt-1">
                            ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡πÜ (‡∏´‡∏•‡∏±‡∏Å‡∏û‡∏±‡∏ô‡∏ö‡∏≤‡∏ó) ‡∏ñ‡∏µ‡πà‡∏°‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö <strong>‡∏ô.‡∏™. ‡∏™‡∏≤‡∏£‡∏û‡∏£‡∏£‡∏ì ‡∏ô‡∏ß‡∏•‡∏Å‡∏∏‡∏•</strong> (111 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á) ‡πÅ‡∏•‡∏∞ <strong>‡∏ô.‡∏™. ‡∏™‡∏ì‡∏¥‡∏™‡∏≤ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÅ‡∏Å‡πâ‡∏ß</strong> ‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏î‡∏π‡πÅ‡∏•‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£
                        </p>
                    </div>
                </div>

                <!-- AI Insight Button for Federico -->
                <div class="mt-4">
                    <button onclick="generateAIInsight('federico', 'Analyze Federico\'s transactions. He transfers large sums to Papaya Hills/Rambutan Hills but also has frequent small transfers to Saraphan (111 times). What kind of business structure is implied here? Answer in Thai.')" class="text-purple-600 hover:text-purple-800 text-sm font-bold flex items-center gap-1">
                        <span>‚ú® ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏î‡πâ‡∏ß‡∏¢ AI</span>
                    </button>
                    <div id="ai-insight-federico" class="hidden mt-3 p-3 bg-purple-50 border border-purple-100 rounded-lg text-sm text-slate-700 ai-content"></div>
                </div>
            </div>

            <div class="lg:col-span-4 space-y-6 order-1 lg:order-2">
                <div class="bg-purple-600 text-white p-6 rounded-2xl shadow-lg relative overflow-hidden">
                    <div class="absolute top-0 right-0 -mr-4 -mt-4 w-24 h-24 bg-purple-500 rounded-full opacity-50 blur-xl"></div>
                    <div class="relative z-10">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="text-4xl bg-white/20 p-2 rounded-lg">üèóÔ∏è</span>
                            <h2 class="text-2xl font-bold">MR. FEDERICO</h2>
                        </div>
                        <p class="text-purple-100 leading-relaxed mb-4">
                            ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏≠‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏¥‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏´‡∏•‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
                        </p>
                        <ul class="text-sm space-y-2 text-purple-50">
                            <li class="flex items-center gap-2">üîπ <strong>Role:</strong> Business Developer</li>
                            <li class="flex items-center gap-2">üîπ <strong>Project:</strong> Papaya/Rambutan Hills</li>
                            <li class="flex items-center gap-2">üîπ <strong>Partner:</strong> Mr. Aidin</li>
                        </ul>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="text-green-500">üîó</span> ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô
                    </h3>
                    <div class="flex items-center justify-between p-3 bg-emerald-50 rounded-lg border border-emerald-100">
                        <div>
                            <div class="text-xs text-emerald-600 font-bold uppercase">‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å Aidin</div>
                            <div class="font-bold text-emerald-900 text-lg">22 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                        </div>
                        <span class="text-2xl">üí∏</span>
                    </div>
                    <div class="mt-4 text-sm text-slate-600">
                        ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 4,000 - 100,000+ ‡∏ö‡∏≤‡∏ó ‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. MR. AIDIN Profile -->
        <section id="aidin" class="scroll-mt-24 grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-4 space-y-6">
                <div class="bg-emerald-600 text-white p-6 rounded-2xl shadow-lg relative overflow-hidden">
                    <div class="absolute top-0 right-0 -mr-4 -mt-4 w-24 h-24 bg-emerald-500 rounded-full opacity-50 blur-xl"></div>
                    <div class="relative z-10">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="text-4xl bg-white/20 p-2 rounded-lg">üöö</span>
                            <h2 class="text-2xl font-bold">MR. AIDIN</h2>
                        </div>
                        <p class="text-emerald-100 leading-relaxed mb-4">
                            ‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏™‡πà‡∏á ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö Federico ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏±‡∏ö Arsenii
                        </p>
                        <ul class="text-sm space-y-2 text-emerald-50">
                            <li class="flex items-center gap-2">üîπ <strong>Role:</strong> Logistician / Partner</li>
                            <li class="flex items-center gap-2">üîπ <strong>Activity:</strong> Supplies & Transport</li>
                            <li class="flex items-center gap-2">üîπ <strong>Key Link:</strong> Funder of Federico</li>
                        </ul>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                     <h3 class="font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="text-yellow-500">üì•</span> ‡πÅ‡∏´‡∏•‡πà‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô‡∏´‡∏•‡∏±‡∏Å (Single Source)
                    </h3>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="aidinSourceChart"></canvas>
                    </div>
                    <p class="text-center text-xs text-slate-500 mt-2">
                        <strong>MS. NEGAR PEZESHKIAN</strong> ‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏´‡∏•‡πà‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (90%+)
                    </p>
                </div>
            </div>

            <div class="lg:col-span-8 bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800 flex items-center gap-2">
                            <span class="text-orange-500">üì§</span> ‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå (Logistics Outflow)
                        </h3>
                        <p class="text-sm text-slate-500 mt-1">‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á (‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏≤‡∏ó)</p>
                    </div>
                    <span class="bg-emerald-100 text-emerald-800 text-xs font-bold px-3 py-1 rounded-full mt-2 md:mt-0">Supply Chain</span>
                </div>
                
                <div class="chart-container">
                    <canvas id="aidinOutflowChart"></canvas>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                    <div class="bg-slate-50 p-3 rounded-lg border border-slate-100 text-center">
                        <div class="text-3xl mb-2">üõí</div>
                        <div class="font-bold text-slate-700">Siam Makro</div>
                        <div class="text-sm text-emerald-600">114 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
                    </div>
                    <div class="bg-slate-50 p-3 rounded-lg border border-slate-100 text-center">
                        <div class="text-3xl mb-2">üì¶</div>
                        <div class="font-bold text-slate-700">KEX Express</div>
                        <div class="text-sm text-emerald-600">‡∏™‡πà‡∏á‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏ñ‡∏µ‡πà</div>
                    </div>
                    <div class="bg-slate-50 p-3 rounded-lg border border-slate-100 text-center">
                        <div class="text-3xl mb-2">‚ö°</div>
                        <div class="font-bold text-slate-700">Flash Pay</div>
                        <div class="text-sm text-emerald-600">‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á</div>
                    </div>
                </div>

                <!-- AI Insight Button for Aidin -->
                <div class="mt-6 border-t border-slate-100 pt-4">
                    <button onclick="generateAIInsight('aidin', 'Analyze Aidin\'s role. He receives money from one person (Negar) and spends it on Makro and Kerry. He also sends money to Federico. What is his function in this network? Answer in Thai.')" class="text-emerald-600 hover:text-emerald-800 text-sm font-bold flex items-center gap-1">
                        <span>‚ú® ‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå‡∏î‡πâ‡∏ß‡∏¢ AI</span>
                    </button>
                    <div id="ai-insight-aidin" class="hidden mt-3 p-3 bg-emerald-50 border border-emerald-100 rounded-lg text-sm text-slate-700 ai-content"></div>
                </div>
            </div>
        </section>

        <!-- 5. Conclusion -->
        <section class="bg-slate-800 rounded-3xl p-8 md:p-12 text-center text-white relative overflow-hidden">
             <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#fff 1px, transparent 1px); background-size: 30px 30px;"></div>
             <div class="relative z-10">
                <h2 class="text-3xl font-bold mb-6">‡∏ö‡∏ó‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô (Hypothesis)</h2>
                <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-left">
                    <div class="bg-slate-700/50 p-6 rounded-xl border border-slate-600 backdrop-blur-sm">
                        <h3 class="font-bold text-lg mb-2 text-blue-300">Community Hypothesis</h3>
                        <p class="text-slate-300 text-sm leading-relaxed">
                            ‡∏ó‡∏±‡πâ‡∏á 3 ‡∏Ñ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏° <strong>Expat Business Network</strong> ‡πÉ‡∏ô‡πÄ‡∏Å‡∏≤‡∏∞‡∏™‡∏°‡∏∏‡∏¢ ‡πÇ‡∏î‡∏¢‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏ô‡∏±‡∏î
                        </p>
                    </div>
                    <div class="bg-slate-700/50 p-6 rounded-xl border border-slate-600 backdrop-blur-sm">
                        <h3 class="font-bold text-lg mb-2 text-purple-300">Operational Link</h3>
                        <p class="text-slate-300 text-sm leading-relaxed">
                            Federico ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà, Aidin ‡∏î‡∏π‡πÅ‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå, ‡∏™‡πà‡∏ß‡∏ô Arsenii ‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏ô‡∏µ‡πâ
                        </p>
                    </div>
                    <div class="bg-slate-700/50 p-6 rounded-xl border border-slate-600 backdrop-blur-sm">
                        <h3 class="font-bold text-emerald-300">Indirect Flow</h3>
                        <p class="text-slate-300 text-sm leading-relaxed">
                            ‡πÅ‡∏°‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Arsenii ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô ‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (Shared Merchants) ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ß‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
                        </p>
                    </div>
                </div>
             </div>
        </section>

    </main>

    <footer class="bg-slate-100 py-8 border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center text-slate-500 text-sm">
            <p>&copy; 2026 Financial Intelligence Analysis Report. POCKY Mandex.onino.</p>
        </div>
    </footer>

    <!-- Chart.js Implementation -->
    <script>
        // Activate Plugin
        Chart.register(ChartDataLabels);

        // --- Utility Functions ---
        // Label wrapping logic for Chart.js
        function formatLabel(str, maxwidth) {
            const sections = [];
            const words = str.split(" ");
            let temp = "";
            words.forEach(function(item, index) {
                if (temp.length > 0) {
                    const concat = temp + ' ' + item;
                    if (concat.length > maxwidth) {
                        sections.push(temp);
                        temp = "";
                    } else {
                        if (index === (words.length - 1)) {
                            sections.push(concat);
                            return;
                        } else {
                            temp = concat;
                            return;
                        }
                    }
                }
                if (index === (words.length - 1)) {
                    sections.push(item);
                    return;
                }
                if (item.length < maxwidth) {
                    temp = item;
                } else {
                    sections.push(item);
                }
            });
            return sections;
        }

        // Common Chart Options with DataLabels
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                              return label.join(' ');
                            } else {
                              return label;
                            }
                        },
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += new Intl.NumberFormat('th-TH', { style: 'currency', currency: 'THB' }).format(context.raw);
                            } else if (context.parsed.x !== null) { // For horizontal bars
                                label += new Intl.NumberFormat('th-TH', { style: 'currency', currency: 'THB' }).format(context.raw);
                            }
                            return label;
                        }
                    }
                },
                legend: {
                    display: false // Hide legend for simple bar charts to save space
                },
                datalabels: {
                    anchor: 'end',
                    align: 'end',
                    formatter: function(value, context) {
                        // Intelligent formatting based on value size
                        if (value >= 1000000) {
                            return '‡∏ø' + (value / 1000000).toFixed(1) + 'M';
                        } else if (value >= 1000) {
                            return '‡∏ø' + (value / 1000).toFixed(0) + 'k';
                        }
                        return value;
                    },
                    font: {
                        weight: 'bold',
                        size: 11
                    },
                    color: '#475569' // Slate-600
                }
            },
            layout: {
                padding: {
                    right: 40 // Add padding to prevent labels clipping
                }
            }
        };

        // --- Gemini AI Integration ---
        const apiKey = ""; // API Key injected by environment

        async function generateAIInsight(elementId, promptText) {
            const container = document.getElementById(`ai-insight-${elementId}`);
            
            // Toggle visibility
            if (!container.classList.contains('hidden') && container.innerHTML !== '') {
                container.classList.add('hidden');
                return;
            }
            
            container.classList.remove('hidden');
            container.innerHTML = '<div class="flex items-center gap-2"><div class="ai-loading"></div><span class="text-slate-500">Gemini ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</span></div>';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: promptText }] }]
                    })
                });

                const data = await response.json();
                const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text || "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ";
                
                // Render Markdown
                container.innerHTML = marked.parse(aiText);
                
            } catch (error) {
                console.error("Gemini API Error:", error);
                container.innerHTML = '<span class="text-red-500">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö AI</span>';
            }
        }

        // --- Data Population ---

        // 1. Arsenii Outflow Data (Horizontal Bar)
        // Data: T2P (3.1M), OMART (148k), Pison (58k), AMEX (424k), Arc Store (157k) -> Using Top 5 by Frequency/Impact mix
        // Adjusting labels for wrapping
        const arseniiOutflowLabels = [
            '‡∏ö‡∏à‡∏Å. ‡∏ó‡∏µ‡∏ó‡∏π‡∏û‡∏µ (E-Wallet)', 
            'MR. IURII SEMENOV', 
            'MR. ALEKSANDR IOSHIN', 
            'BBL CREDIT CARD (AMEX)', 
            'K+ shop (OMART LIQUOR)'
        ].map(l => formatLabel(l, 16));

        const arseniiOutflowData = [3162126, 9346136, 4905412, 424625, 148217];

        new Chart(document.getElementById('arseniiOutflowChart'), {
            type: 'bar',
            data: {
                labels: arseniiOutflowLabels,
                datasets: [{
                    label: '‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°',
                    data: arseniiOutflowData,
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.7)', // Blue
                        'rgba(244, 63, 94, 0.7)',  // Red (Suspicious/High)
                        'rgba(244, 63, 94, 0.7)',  // Red
                        'rgba(100, 116, 139, 0.7)', // Slate
                        'rgba(16, 185, 129, 0.7)'  // Green
                    ],
                    borderColor: 'transparent',
                    borderWidth: 1
                }]
            },
            options: {
                ...commonOptions,
                indexAxis: 'y', // Horizontal bar
                scales: {
                    x: {
                        display: false, // Hide X axis to reduce clutter since we have labels
                        grid: { display: false }
                    },
                    y: {
                        grid: { display: false }
                    }
                }
            }
        });

        // 2. Arsenii Inflow (Donut - conceptual distribution)
        // Data: Bitazza (44M), Gulf Binance (25M), Oussama (8.8M), Lime Street (1.5M)
        new Chart(document.getElementById('arseniiInflowChart'), {
            type: 'doughnut',
            data: {
                labels: ['Bitazza', 'Gulf Binance', 'Mr. Oussama', 'Lime Street', 'Others'],
                datasets: [{
                    data: [44518101, 25191997, 8833500, 1493469, 500000], // Estimated 'Others'
                    backgroundColor: [
                        '#3b82f6', // Blue
                        '#60a5fa', // Light Blue
                        '#93c5fd', // Lighter Blue
                        '#1e40af', // Dark Blue
                        '#cbd5e1'  // Grey
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: { boxWidth: 12, font: { size: 10 } }
                    },
                    tooltip: commonOptions.plugins.tooltip,
                    datalabels: {
                        display: false // Too cluttered for donut
                    }
                }
            }
        });

        // 3. Federico Outflow (Bar)
        // Data: Saraphan (814k), Sanisa (167k), Anton (141k), Sopa (659k)
        const federicoOutflowLabels = [
            '‡∏ô.‡∏™. ‡∏™‡∏≤‡∏£‡∏û‡∏£‡∏£‡∏ì ‡∏ô‡∏ß‡∏•‡∏Å‡∏∏‡∏• (Payroll)', 
            '‡∏ô.‡∏™. ‡πÇ‡∏™‡∏†‡∏≤ ‡∏°‡∏∏‡∏Ç‡∏°‡∏ì‡πÄ‡∏ë‡∏µ‡∏¢‡∏£', 
            '‡∏ô.‡∏™. ‡∏™‡∏ì‡∏¥‡∏™‡∏≤ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÅ‡∏Å‡πâ‡∏ß', 
            'MR. ANTON ZAOZEROV'
        ].map(l => formatLabel(l, 16));

        const federicoOutflowData = [814831, 659237, 167200, 141800];

        new Chart(document.getElementById('federicoOutflowChart'), {
            type: 'bar',
            data: {
                labels: federicoOutflowLabels,
                datasets: [{
                    label: '‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°',
                    data: federicoOutflowData,
                    backgroundColor: 'rgba(168, 85, 247, 0.7)', // Purple
                    borderRadius: 4
                }]
            },
            options: {
                ...commonOptions,
                indexAxis: 'y',
                scales: {
                    x: {
                        display: false,
                        grid: { display: false }
                    },
                    y: {
                        grid: { display: false }
                    }
                }
            }
        });

        // 4. Aidin Outflow (Bar)
        // Data: Makro (614k), Emma (365k), Saghar (402k), Duangthip (200k)
        const aidinOutflowLabels = [
            'Siam Makro', 
            'MISS SAGHAR HAJ', 
            'MISS EMMA LOUISE', 
            '‡∏ô.‡∏™. ‡∏î‡∏ß‡∏á‡∏ó‡∏¥‡∏û‡∏¢‡πå ‡πÅ‡∏Å‡πâ‡∏ß‡πÄ‡∏ó‡∏û',
            'BBL Credit Card'
        ].map(l => formatLabel(l, 16));

        const aidinOutflowData = [614279, 402797, 365192, 200586, 72398];

        new Chart(document.getElementById('aidinOutflowChart'), {
            type: 'bar',
            data: {
                labels: aidinOutflowLabels,
                datasets: [{
                    label: '‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°',
                    data: aidinOutflowData,
                    backgroundColor: 'rgba(16, 185, 129, 0.7)', // Emerald
                    borderRadius: 4
                }]
            },
            options: {
                ...commonOptions,
                indexAxis: 'y',
                scales: {
                    x: {
                        display: false,
                        grid: { display: false }
                    },
                    y: {
                        grid: { display: false }
                    }
                }
            }
        });

        // 5. Aidin Source (Pie - emphasizing single source)
        new Chart(document.getElementById('aidinSourceChart'), {
            type: 'pie',
            data: {
                labels: ['MS. NEGAR PEZESHKIAN', 'Others'],
                datasets: [{
                    data: [6554900, 100000], // 90%+ dominance
                    backgroundColor: ['#fbbf24', '#e2e8f0'] // Amber vs Slate
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: commonOptions.plugins.tooltip,
                    datalabels: {
                        color: '#fff',
                        font: { weight: 'bold' },
                        formatter: (value, ctx) => {
                            let sum = 0;
                            let dataArr = ctx.chart.data.datasets[0].data;
                            dataArr.map(data => { sum += data; });
                            let percentage = (value*100 / sum).toFixed(0)+"%";
                            return percentage;
                        }
                    }
                }
            }
        });

    </script>
</body>
</html>